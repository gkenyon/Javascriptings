<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no, minimum-scale=1, maximum-scale=1" />
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="apple-mobile-web-app-status-bar-style" content="black" />
    <title>quiz-scroll</title>
    <style type="text/css">
        html, body, form, #scroller, #scroller-frame, .scroller-wrap, .scroller-mid { box-sizing:border-box; height:100%; margin:0; width:100%; }
        h1, h2 { color:#231f20; font-size:1.8em; letter-spacing: 0.3em; margin:0 0 0.5em; }
        h2 { font-size:1.3em; }
        hr { background-color:transparent; border:solid #b89b5d; border-width:0 0 2px; clear:both; color:#b89b5d; margin:0 auto 1em; width:5%; }
        a { outline:0; }
        img { max-width:100%; height:auto; }
        input, .btn { border:2px solid #b89b5d; outline:0; box-sizing:border-box; margin:0 0.5em 1em; padding:2px 1px 1px 1px; text-align:center; vertical-align:middle; white-space:normal; width:40%; }
        input[type=radio] { display:none; }
        .btn { box-shadow: 10px 10px 0 0 #b89b5d; display:inline-block; padding:2em; position:relative; }
        .btn:active { box-shadow:none; top:10px; left:10px; }
        #scroller { background:transparent; color:#a16d19; font:18px/1.5 helvetica,arial,freesans,sans-serif; }
        #scroller-frame, .scroller-mid { border:0px solid #b89b5d; border-width:1vw; width:90.5%; height:74%; }
        #scroller-frame { position:fixed; left:5.4%; top:13.5%; z-index:1; }
        #header { width:92.3%; position:fixed; left:3.6%; }
        .scroller-mid { border-color:#231f20; display:table; padding:6% 4% 8% 6%; position:relative; left:3.6%; }
        .tcell { display:table-cell; text-align:center; vertical-align:middle; position:relative; z-index:1; }
        .scroller-nav img { min-width:53px; width:5%;  }
        .scroller-top, .scroller-foot { display:table; width:100%; }
        .scroller-top { height:11%; }
        .scroller-foot { height:15%; }
        .invalid { background:#f55a58; }
        .left { float:left; }
        .right { float:right; }
        @media screen and (max-width:800px) {
            input, .btn { width:80%; }
        }
    </style>	
</head>

<body>
<div id="scroller">
    <!--<div id="header" class="scroller-top"><div class="tcell"><a class="left" title="Back to the exhibition" href="?"><img src="img/logo_va.png" alt="V&A"></a><a class="right" href="?"><img src="img/logo_sponsors.png" alt="Sponsors"></a></div></div>-->
    <div id="scroller-frame"></div>
    <form method="post" action="#">
        <div class="scroller-wrap" id="p1">
            <div class="scroller-top"></div>
            <div class="scroller-mid">
                <div class="tcell">
                    <h1>WHAT IS LUXURY?</h1>
                    <hr>
                    copy copy copy copy copy copy copy copy copy copy copy copy copy copy copy copy copy copy copy copy 
                </div>
            </div>
            <div class="scroller-foot"><a class="scroller-nav tcell" href="#p2" title="next"><img src="img/next.png" alt="next"></a></div>
        </div>
        <div class="scroller-wrap" id="p2">
            <div class="scroller-top"><a class="scroller-nav tcell" href="#p1" title="back"><img src="img/prev.png" alt="back"></a></div>
            <div class="scroller-mid">
                <div class="tcell">
                    <h2>WHAT IS YOUR OBJECT?</h2>
                    <input type="text" id="a-object">
                </div>
            </div>
            <div class="scroller-foot"><a class="scroller-nav tcell" href="#p3" title="next"><img src="img/next.png" alt="next"></a></div>
        </div>
        <div class="scroller-wrap" id="p3">
            <div class="scroller-top"><a class="scroller-nav tcell" href="#p2" title="back"><img src="img/prev.png" alt="back"></a></div>
            <div class="scroller-mid">
                <div class="tcell">
                    <h2>Is it handmade or mass-produced?</h2>
                    <label class="btn" for="a-handmade">handmade</label><input type="radio" name="a-handmade" id="a-handmade" value="handmade">
                    <label class="btn" for="a-mass-produced">mass-produced</label><input type="radio" name="a-handmade" id="a-mass-produced" value="mass-produced">
                </div>
            </div>
            <div class="scroller-foot"><a class="scroller-nav tcell" href="#p4" title="next"><img src="img/next.png" alt="next"></a></div>
        </div>
        <div class="scroller-wrap" id="p4">
            <div class="scroller-top"><a class="scroller-nav tcell" href="#p3" title="back"><img src="img/prev.png" alt="back"></a></div>
            <div class="scroller-mid">
                <div class="tcell">
                    copy copy copy copy copy copy copy copy 
                </div>
            </div>
            <div class="scroller-foot"></div>
        </div>
        <div class="scroller-foot"></div>
    </form>
</div>

<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
<script type="text/javascript">
jQuery(document).ready(function() {
    
    var p = 1,
        ps = 2, //initial no of pgs to show
        winTop = $(window).scrollTop(),
        canscroll = 1,
        stopwords = ['luca','keith','tania','tom','chris'];

    /* init */
    (function(){
        var resize = function(){
            var vw = $(window).width()/100;
            if( $('#scroller-frame').outerWidth()===$('#scroller-frame').innerWidth() ){ $('#scroller-frame, .scroller-mid').css('border-width',vw+'px') }
            $('#scroller-frame').height($('.scroller-mid').innerHeight());//.css({'top':'inherit','bottom':($('.scroller-mid').offset().top+$('.scroller-mid').innerHeight()+1.8*vw)+'px'});
        }; resize(); $(window).on('resize', function(){ resize(); });
        $('.scroller-wrap:nth-child(n+'+(p+ps)+')').hide(0);
        $('.scroller-wrap:nth-child(n+'+(p+ps-1)+')>.scroller-foot').css('opacity',0);
        $(window).scrollTop(0);
    })();
    
    /* scrolling */
    function scrollDir(){
        var s = $(window).scrollTop();
        var d = (s > winTop)? 1:-1;
        winTop = s;
        return d;
    }
    
    function pageSnap(direction){
        if( !!canscroll ){
            p += direction*1; 
            if( !$('#p'+p).filter(':visible').length ){ p -= direction*1; pageSnap(0); return; }
            canscroll = 0; 
            $('html, body').animate({scrollTop:$('#p'+p).offset().top}, 500, function(){winTop=$(window).scrollTop(); setTimeout(function(){canscroll=1},100)});
        }
        return false;
    }
    
    $('#scroller').on('click', '.scroller-foot>.scroller-nav', function(e){ e.preventDefault(); pageSnap(1); });
    $('#scroller').on('click', '.scroller-top>.scroller-nav', function(e){ e.preventDefault(); pageSnap(-1); });
    $(window).on('scroll', function(e){ e.preventDefault(); pageSnap(scrollDir()); });
    $(window).on('resize', function(e){ e.preventDefault(); pageSnap(0); });
    $('form').on('focusout', 'input', function(){ canscroll=1; pageSnap(0); });
    
    /* validation */
    function in_array(arr, val) {
      for (var i = 0, len = arr.length; i < len; i++) {
        if (arr[i] == val) return true;
      }
      return false;
    }
    
    function halt_quiz(input){
        $('.scroller-wrap:nth-child(n+'+p+')>.scroller-foot').stop(1).css({'opacity':0});
        $('.scroller-wrap:nth-child(n+'+(p+1)+')').stop(1).hide(0);
    }
    
    function validate(input){
        var t = input.type,
            v = input.value;
        $(input).removeClass('invalid');
        if( t==='text' ){
            if( v.length < 3 ){ halt_quiz(); return false; }
            if( in_array(stopwords, v) ){ $(input).addClass('invalid'); halt_quiz(); return false; }
        }
        return true;
    }
    
    $('form').on('change keyup focus focusout', 'input', function(){
        if( !!('ontouchstart' in window) ){
            canscroll=0;
        }
        if( validate(this) ){
            $('#p'+p+'>.scroller-foot').animate({'opacity':1}, 500);
            $('#p'+(p+1)).show(500);
        }
    });
    
    /* validation */
    function definery(form){
        console.log($("input[name=a-handmade]:checked").val());
        return false;
    }
    
    $('form').on('submit', function(e){ e.preventDefault(); definery(this) });
    
});    
</script>
</body>
</html>
