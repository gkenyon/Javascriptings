<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, minimum-scale=1, initial-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />
    <title>What's the Point?</title>
    <style type="text/css">
      html, body { height:100%; margin:0; }
      body { background:#000; font:14px/1 helvetica,arial,freesans,sans-serif; }
      .flickshow, .slide { height:100%; width:100%; overflow:hidden; position:relative; }
      .slide { background:#000; }
      .slide, .slide img { max-height:100%; max-width:100%; margin:auto; position:absolute; left:0; top:0; bottom:0; right:0; }
      @keyframes shake {
        0%, 100% { transform:translate3d(0, 0, 0); }
        10%, 30%, 50%, 70%, 90% { transform:translate3d(-10px, 0, 0); }
        20%, 40%, 60%, 80% { transform:translate3d(10px, 0, 0); }
      }
      .slide.wipe--no { animation-duration:1s; animation-name:shake; }
      .slide.wipe--left { left:-200%; transition:left 1s; }
      .slide.wipe--right { right:-200%; transition:right 1s; }
      .slide.wipe--up { top:-200%; transition:top 1s; }
      .slide.wipe--down { bottom:-200%; transition:bottom 1s; }
    </style>
</head>

<body>

<div class="flickshow">
  <div class="slide"><img data-way="no" src="img/pointer/no/2014GY1389.jpg"></div>
  <div class="slide"><img data-way="up" src="img/pointer/up/2007BP4022.jpg"></div>
  <div class="slide"><img data-way="no" src="img/pointer/no/2006AM3262.jpg"></div>
  <div class="slide"><img data-way="left" src="img/pointer/left/2014GW5263.jpg"></div>
  <div class="slide"><img data-way="up" src="img/pointer/up/2017JY7670.jpg"></div>
  <div class="slide"><img data-way="down" src="img/pointer/down/2007BP2220.jpg"></div>
  <div class="slide"><img data-way="right" src="img/pointer/right/2013GN4204.jpg"></div>
  <div class="slide"><img data-way="right" src="img/pointer/right/2006AC4723.jpg"></div>
  <div class="slide"><img data-way="up" src="img/pointer/up/2016JE4681.jpg"></div>
  <div class="slide"><img data-way="left" src="img/pointer/left/2014GX2957.jpg"></div>
  <div class="slide"><img data-way="down" src="img/pointer/down/2006BB5397.jpg"></div>
  <div class="slide"><img data-way="up" src="img/pointer/up/2007BP4022.jpg"></div>
</div>

<script type="text/javascript">
(function(){
  var dragging = 0,
      touchXY = [0,0];

  function eXY(e){ var xy=[]; if( e.touches && e.touches.length ){ if( e.touches.length>1 ){ xy[0] = (e.touches[0].pageX+e.touches[0].pageX)/2; xy[1] = (e.touches[0].pageY+e.touches[0].pageY)/2;}else{ xy[0] = e.touches[0].pageX; xy[1] = e.touches[0].pageY; } }else{ xy[0] = e.pageX; xy[1] = e.pageY; } return xy; }

  function swipeDir(e) {
    var touchXY2 = eXY(e),
        deltaXY = [touchXY2[0] - touchXY[0] , touchXY2[1] - touchXY[1]],
        dir = 0;
    if (Math.abs(deltaXY[0]) + Math.abs(deltaXY[1]) > 5) {
      if (Math.abs(deltaXY[0]) > Math.abs(deltaXY[1])) {
        dir = deltaXY[0] > 0 ? 'right' : 'left';
      } else {
        dir = deltaXY[1] > 0 ? 'down' : 'up';
      }
    }
    touchXY = touchXY2;
    return dir;
  }  

  function wipe(el, dir) {
    if (dragging && dir) {
      if (dir !== el.dataset.way) {
        dir = 'no';
      }
      el.parentNode.class = 'slide';
      el.parentNode.classList.add('wipe--'+ dir);
      dragging = 0;
    }
  }

  document.ontouchstart = function(e){ if (e.target.tagName=='IMG') { e.preventDefault(); dragging = 1; swipeDir(e); } };
  document.onmousedown = function(e){ if (e.target.tagName=='IMG') { e.preventDefault(); dragging = 1; swipeDir(e); } };
  document.ontouchmove = function(e){ e.preventDefault(); wipe(e.target, swipeDir(e)) };
  document.onmousemove = function(e){ e.preventDefault(); wipe(e.target, swipeDir(e)) };
    
})();
</script>
</body>
</html>
